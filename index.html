<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="theme-color" content="#252525"/>
        <title>Upupa Bird Ninja</title>
        <style>
            body {
                margin: 0;
                font-family: Inter, sans-serif;
                background-color: #252525;
                background-image: url(https://img.itch.zone/aW1nLzE3MjY2NjA0LmpwZw==/original/RcoHTc.jpg);
                background-repeat: repeat-x;
                background-position: center;
                background-attachment: fixed;
                color: #ffffff;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
            }
            .game_frame {
                width: 100%;
                max-width: 960px;
                height: calc(100vw * 0.625);
                max-height: 600px;
                background-color: #2b2b2b;
                position: relative;
            }
            .fullscreen_btn {
                position: absolute;
                top: 10px;
                right: 10px;
                background: none;
                border: none;
                cursor: pointer;
            }
            .fullscreen_btn img {
                width: 24px;
                height: 24px;
            }
            /* Wallet Icon with Overlay Text */
            .wallet_icon_wrapper {
                position: absolute;
                bottom: 5.55%;
                left: 3.55%;
                width: 18%;
                height: 6.5%;
                opacity: 0;
                transition: opacity 1s ease-in-out;
            }
            .wallet_icon_game {
                width: 100%;
                height: 100%;
                cursor: pointer;
                transition: transform 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
            }
            .wallet_text_overlay {
                position: absolute;
                top: 50%;
                left: 9.5%;
                transform: translateY(-50%);
                font-size: 15px;
                font-family: sans-serif;
                color: #ffffff;
                pointer-events: none; 
            }
            iframe {
                width: 100%;
                height: 100%;
                border: none;
            }
            .description {
                padding: 40px 20px;
                text-align: center;
                font-size: 1rem;
                background-color: #2b2b2b;
                color: #ffffff;
                width: 100%;
                max-width: 960px;
                box-sizing: border-box;
                position: relative;
            }
            .wallet_icon_desc {
                position: absolute;
                top: 0px;
                right: 25px;
                width: 80px;
                height: 50px;
                cursor: pointer;
                transition: transform 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
            }
            .wallet_icon_desc:hover {
                transform: scale(1.1);
            }
            .description h1 {
                margin: 0;
                font-size: 2rem;
                font-weight: bold;
                text-transform: uppercase;
            }
            .description img {
                margin-top: 20px;
                width: 100px;
                height: 65px;
                cursor: pointer;
            }
            .wallet_address {
                margin-top: 10px;
                color: #00ff00;
                font-size: 2rem;
            }
        </style>
    </head>
    <body>
        <div class="game_frame">
            <button title="Enter fullscreen" class="fullscreen_btn">
                <img src="https://itch.io/static/images/enlarge.svg?1734309005" alt="Fullscreen"/>
            </button>
            <!-- Wallet Icon with Overlay Text -->
            <div class="wallet_icon_wrapper" id="walletIconWrapper">
                <img src="https://via.placeholder.com/50" alt="Wallet" class="wallet_icon_game" />
                <div class="wallet_text_overlay">CA:TBA</div>
            </div>
            <iframe
                src="https://html-classic.itch.zone/html/12246759/index.html"
                allow="autoplay; fullscreen *; geolocation; microphone; camera; midi; monetization; xr-spatial-tracking; gamepad; gyroscope; accelerometer; xr; cross-origin-isolated; web-share"
                allowfullscreen>
            </iframe>
        </div>
        <div class="description">
            <img src="https://via.placeholder.com/50x80" alt="Wallet" class="wallet_icon_desc" id="walletIcon" />
            <h1>GAME</h1>
            <p>
                Slice through hordes of enemies as you navigate Upupa the hoopoe through their final trial to bring light to the top of the tower and keep evil at bay for another generation. Upupa Bird Ninja is a fast-paced tough-as-talons adventure.
            </p>
            <p><em>Note: plays best with mouse or controller. Touch input not fully supported.</em></p>
            <a href="https://example.com" target="_blank">
                <img src="https://via.placeholder.com/100x65" alt="Link Image" />
            </a>
            <p id="walletAddress" class="wallet_address"></p>
        </div>

        <script>
            setTimeout(() => {
                const walletIconWrapper = document.getElementById('walletIconWrapper');
                walletIconWrapper.style.opacity = '1';
            }, 1250);

            // 錢包連接功能
            document.getElementById('walletIcon').addEventListener('click', async () => {
                if (!window.solana || !window.solana.isPhantom) {
                    alert('Phantom wallet not detected. Please install it from the Chrome Web Store.');
                    return;
                }

                try {
                    const response = await window.solana.connect();
                    const publicKey = response.publicKey.toString();
                    const message = 'Sign this message to confirm your wallet address.';
                    const encodedMessage = new TextEncoder().encode(message);
                    await window.solana.signMessage(encodedMessage, 'utf8');

                    document.getElementById('walletAddress').innerText = `Wallet Address: ${publicKey}`;
                } catch (error) {
                    console.error('Error during wallet connection:', error);
                    alert('Wallet connection failed.');
                }
            });
        </script>
    </body>
</html>
